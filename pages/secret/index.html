<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stick Figures Fight</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #2c2c2c;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #app {
      width: 100%;
      height: 100%;
      max-width: 960vh;
      max-height: 540vh;
      background: #000;        /* black background behind video */
      position: relative;
      overflow: hidden;
    }
    #loading-screen {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      color: #fff;
      font-size: 1.2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #container {
      width: 100%; height: 100%;
      display: none;           /* start hidden until Play pressed */
    }
    #video-overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 5;
    }
    #play {
      padding: 0.5rem 1rem;
      font-size: 1.2rem;
      color: #fff;
      background: #000;
      border: none;
      cursor: pointer;
    }
    video {
      width: 100%;
      height: 100%;
      background: #000;
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="loading-screen">Loadingâ€¦</div>
    <div id="video-overlay">
      <button id="play">Play</button>
    </div>
    <div id="container">
      <video id="video-player" preload="metadata" playsinline>
        <!-- src assigned by JS -->
      </video>
    </div>
  </div>

  <script>
    window.onload = function() {
      const videos = [
        "assets/1.mp4",
        "assets/2.mp4",
        "assets/3.mp4",
        "assets/4.mp4",
        "assets/5.mp4",
        "assets/6.mp4",
        "assets/7.mp4"
      ];

      // pick a random video
      const src = videos[Math.floor(Math.random() * videos.length)];
      const video = document.getElementById("video-player");
      const loading = document.getElementById("loading-screen");
      const overlay = document.getElementById("video-overlay");
      const container = document.getElementById("container");
      const playBtn = document.getElementById("play");

      // set source and listen for metadata
      video.src = src;
      video.addEventListener("loadedmetadata", () => {
        loading.style.display = "none";
      });
      video.addEventListener("error", e => {
        loading.innerText = "Error loading video";
        console.error(e);
      });

      // when it ends, allow click on video to replay
      video.addEventListener("ended", () => {
        video.style.cursor = "pointer";
        video.addEventListener("click", function replay() {
          video.play();
          video.style.cursor = "default";
          video.removeEventListener("click", replay);
        }, { once: true });
      });

      // play button: hide overlay, show container & play
      playBtn.onclick = () => {
        overlay.style.display = "none";
        container.style.display = "block";
        video.play();
      };
    };
  </script>
</body>
</html>
