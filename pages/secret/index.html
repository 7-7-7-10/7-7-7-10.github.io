<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Meta Tags omitted for brevity -->

  <title>Stick Figures Fight</title>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5784711369755422" crossorigin="anonymous"></script>

  <!-- Assets -->
  <link rel="stylesheet" crossorigin href="assets/index-B-zgGEWq.css" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #2c2c2c;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #app {
      width: 100%;
      height: 100%;
      max-width: 960px;
      max-height: 540px;
      background: #fff;
      box-shadow: 0 0 10px #000;
      overflow: hidden;
    }

    .hidden {
      display: none !important;
    }

    @media (max-width: 960px) {
      #app {
        max-width: 100%;
        max-height: 100%;
      }
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const videos = [
        "assets/1.mp4",
        "assets/2.mp4",
        "assets/3.mp4",
        "assets/4.mp4",
        "assets/5.mp4",
        "assets/6.mp4",
        "assets/7.mp4"
      ];

      function pickRandom(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      const chosenVideo = pickRandom(videos);

      document.querySelector("#app").innerHTML = `
        <div id="loading-screen" class="hidden absolute w-full h-full lg:flex justify-center items-center bg-video z-20">
          <p class="text-white text-lg">Loading...</p>
        </div>
        <div class="bg-video min-h-screen flex justify-center items-center">
          <div id="container" class="grow flex hidden">
            <div id="video-container" class="w-full relative">
              <div id="link-overlay" class="bg-blue absolute z-20 right-[10%] top-[12%] w-[68%] h-[11%]">
                <a href="https://www.youtube.com/watch?v=VufDd-QL1c0" target="_blank" class="w-full h-full block"></a>
              </div>
              <div id="video-overlay" class="absolute w-full h-full items-center justify-center flex z-10">
                <div>
                  <button id="play" class="bg-black py-2 px-4 w-[100px] md:w-[300px] text-white text-lg relative top-[40px] left-[40%] md:left-[15%] xl:top-[120px] xl:left-[40%]">
                    Play
                  </button>
                </div>
              </div>
              <video
                id="video-player"
                class="w-full h-full"
                playsinline
                preload="metadata"
              >
                <source src="${chosenVideo}" type="video/mp4" />
              </video>
            </div>
            <div class="bg-transparent w-0 md:w-[110px] lg:w-[200px] xl:w-[300px] h-auto flex justify-center items-center shrink-0"></div>
          </div>
        </div>
      `;

      const videoPlayer = document.getElementById("video-player");
      const loadingScreen = document.getElementById("loading-screen");
      const playBtn = document.getElementById("play");
      const videoOverlay = document.getElementById("video-overlay");
      const container = document.getElementById("container");

      function showLoading() {
        loadingScreen.classList.remove("hidden");
      }

      function hideLoading() {
        loadingScreen.classList.add("hidden");
      }

      videoPlayer.addEventListener("loadedmetadata", () => {
        hideLoading();
      });

      videoPlayer.addEventListener("error", (e) => {
        console.error("Error loading video:", e);
        loadingScreen.innerHTML = `<p class="text-white text-lg">Error loading video. Please try again.</p>`;
        showLoading();
      });

      videoPlayer.addEventListener("ended", () => {
        videoPlayer.style.cursor = "pointer";
        videoPlayer.addEventListener("click", function replay() {
          videoPlayer.play();
          videoPlayer.style.cursor = "default";
          videoPlayer.removeEventListener("click", replay);
        });
      });

      playBtn.addEventListener("click", () => {
        videoOverlay.classList.add("hidden");
        container.classList.remove("hidden");
        videoPlayer.play();
      });
    });
  </script>
</body>
</html>
